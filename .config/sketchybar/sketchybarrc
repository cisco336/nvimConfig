PLUGIN_DIR="$CONFIG_DIR/plugins"
ITEM_DIR="$CONFIG_DIR/items"
FONT="Hack Nerd Font"
export NERD_FONT="Hack Nerd Font Mono"
export PADDINGS_SMALL=4
export PADDINGS=8
export PADDINGS_LARGE=16

bar_config=(
	position=top
	height=40
	blur_radius=30
	color=0x40000000
	border_width=1
	border_color=0x20ffffff
	corner_radius=20
	margin=9
	y_offset=2
)

default=(
	margin=10
	corner_radius=10
	padding_left=5
	padding_right=1
	icon.font="Hack Nerd Font:20.0"
	label.font="Hack Nerd Font:Thin:14.0"
	icon.color=0xffffffff
	label.color=0xffffffff
	icon.padding_left=4
	icon.padding_right=4
	icon.y_offset=1
	label.padding_left=4
	label.padding_right=4
	updates=when_shown
)

sketchybar --bar "${bar_config[@]}" \
	--default "${default[@]}"

sketchybar --add item chevron left \
	--set chevron icon= label.drawing=off \
	--add item front_app left \
	--set front_app icon.drawing=off script="$PLUGIN_DIR/front_app.sh" \
	--subscribe front_app front_app_switched

sketchybar --add item clock right \
	--set clock update_freq=10 icon= script="$PLUGIN_DIR/clock.sh" \
	--add item volume right \
	--set volume script="$PLUGIN_DIR/volume.sh" \
	--subscribe volume volume_change \
	--add item battery right \
	--set battery update_freq=120 script="$PLUGIN_DIR/battery.sh" \
	--subscribe battery system_woke power_source_change

source $ITEM_DIR/media.sh
sketchybar --add event aerospace_workspace_change
source $ITEM_DIR/aerospace.sh
add_aerospace_item right

##### Force all scripts to run the first time (never do this in a script) #####
sketchybar --update
